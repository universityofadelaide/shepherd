langcode: en
status: true
id: node_type_shp_environment
label: Site node
migration_group: shp_content_migration
migration_tags:
  - shp_content_migration

source:
  key: migrate
  plugin: d8_entity
  entity_type: node
  bundle: shp_environment
  track_changes: yes

process:
  uid: uid
  changed: changed
  created: created
  status: status
  type: type
  title: title
  field_cache_backend: field_cache_backend
  field_max_replicas: field_max_replicas
  field_min_replicas: field_min_replicas
  field_newrelic_enabled: field_newrelic_enabled
  field_shp_cpu_limit: field_shp_cpu_limit
  field_cpu_request: field_cpu_request
  field_shp_cron_jobs: field_shp_cron_jobs
  field_shp_cron_suspended: field_shp_cron_suspended
  field_shp_deployment_name: field_shp_deployment_name
  field_shp_domain: field_shp_domain
  field_shp_env_vars: field_shp_env_vars
  field_shp_environment_type: field_shp_environment_type
  field_shp_git_reference: field_shp_git_reference
  field_shp_memory_limit: field_shp_memory_limit
  field_shp_memory_request: field_shp_memory_request
  field_shp_path: field_shp_path
  field_shp_secrets: field_shp_secrets
  field_shp_site:
    plugin: migration_lookup
    source: field_shp_site
    migration: node_type_shp_site

  field_shp_update_on_image_change: field_shp_update_on_image_change
  field_skip_db_prepop: field_skip_db_prepop

destination:
  plugin: entity:node
  default_bundle: shp_environment

migration_dependencies:
  required:
    - node_type_shp_site
  optional: {  }
